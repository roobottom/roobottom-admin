{% extends "layouts/wrapper.njk" %}
{% from "../govuk-frontend/components/summary-list/macro.njk" import govukSummaryList %}
{% from "../govuk-frontend/components/panel/macro.njk" import govukPanel %}
{% from "../govuk-frontend/components/back-link/macro.njk" import govukBackLink %}

{% block beforeContent %}
{{ govukBackLink({
  text: "Main menu",
  href: "/"
}) }}
{% endblock %}

{% set photoRows = [] %}
{% if photos %}
  {% for photo in photos %}
    {% set row = {
      key: { text: "Photo " + loop.index },
      value: { html: '<img src="/' + photo.url + '" width="300">' }
    } %}
    {% set descriptionRow = {
      key: { text: "Description of photo " + loop.index },
      value: { text: photo.alt }
    } %}
    {% set photoRows = photoRows.concat([row, descriptionRow]) %}
  {% endfor %}
{% endif %}

{% set rows = [
    {
      key: {
        text: "Summary"
      },
      value: {
        text: summary
      }
    },{
      key: {
        text: "Date"
      },
      value: {
        text: date
      }
    },{
      key: {
        text: "Tags"
      },
      value: {
        text: tags
      }
    } if tags,{
      key: {
        text: "Content"
      },
      value: {
        text: content
      }
    }
] %}

{% for photoRow in photoRows %}
  {{ rows.push(photoRow) }}
{% endfor %}

{% block content %}
{{ govukPanel({
  titleText: "Diary post created"
}) }}



{{ govukSummaryList({
  rows: rows
}) }}

{# <dl class="summary">
  <div class="summary-row">
    <dt>Summary</dt>
    <dd>{{ summary }}</dd>
  </div>
  <div class="summary-row">
    <dt>Date</dt>
    <dd>{{ date }}</dd>
  </div>
  <div class="summary-row">
    <dt>Tags</dt>
    <dd>{{ tags }}</dd>
  </div>
  <div class="summary-row">
    <dt>Content</dt>
    <dd>{{ content }}</dd>
  </div>
  {% for photo in photos %}
  <div class="summary-row">
    <dt>Photo {{ loop.index }}</dt>
    <dd><img src="/{{ photo.url }}" width="300"></dd>
  </div>
  <div class="summary-row">
    <dt>Description of photo {{ loop.index }}</dt>
    <dd>{{ photo.alt }}</dd>
  </div>
  {% endfor %}
  
</dl> #}
{% endblock %}